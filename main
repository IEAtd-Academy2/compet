<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خريطة المشهد التنافسي للتدريب</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Subtle Accents -->
    <!-- Application Structure Plan: A dashboard-style, single-page application designed for intuitive exploration. The structure is thematic, not linear, to allow users to analyze the competitive landscape from multiple perspectives. It starts with a high-level market overview (competitor grid), moves to a detailed comparison tool (dynamic profiles and radar chart), then dissects key competitive arenas (accreditation and digital presence), and concludes with actionable strategic recommendations. This user flow from broad overview to specific detail is designed for maximum usability and insight extraction from the report's dense data. -->
    <!-- Visualization & Content Choices: 
    - Goal: Inform/Organize -> Viz: Interactive Competitor Grid (HTML/CSS) -> Interaction: Filter by type, Click to view details -> Justification: Provides a quick, scannable directory of all players.
    - Goal: Compare -> Viz: Dynamic Radar Chart (Chart.js) -> Interaction: Updates based on selected competitor -> Justification: Visually compares competitors' strengths across multiple program areas effectively.
    - Goal: Organize -> Viz: Accreditation Tier Diagram (HTML/CSS) -> Interaction: Static visual -> Justification: Clearly illustrates the market's quality hierarchy without using prohibited SVG/Mermaid.
    - Goal: Compare -> Viz: Digital Presence Bar Chart (Chart.js) -> Interaction: Hover tooltips -> Justification: Standard, clear method for comparing digital marketing effectiveness.
    - Goal: Inform -> Viz: Accordion for Recommendations (HTML/JS) -> Interaction: Click to expand -> Justification: Organizes detailed text into digestible, user-controlled sections. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Tajawal', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .smooth-scroll { scroll-behavior: smooth; }
        .section-hidden { display: none; }
        .section-visible { display: block; }
        .nav-link-active {
            background-color: #0d9488; /* bg-teal-600 */
            color: #ffffff;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 smooth-scroll">

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl md:text-2xl font-bold text-teal-700">تحليل سوق التدريب</h1>
                <div class="hidden md:flex items-center space-x-4 space-x-reverse">
                    <a href="#overview" class="nav-link text-gray-600 hover:bg-teal-500 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300">نظرة عامة</a>
                    <a href="#comparison" class="nav-link text-gray-600 hover:bg-teal-500 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300">مقارنة المنافسين</a>
                    <a href="#analysis" class="nav-link text-gray-600 hover:bg-teal-500 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300">محاور التنافس</a>
                    <a href="#recommendations" class="nav-link text-gray-600 hover:bg-teal-500 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300">توصيات استراتيجية</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-white border border-gray-300 text-gray-700 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                        <option value="#overview">نظرة عامة</option>
                        <option value="#comparison">مقارنة المنافسين</option>
                        <option value="#analysis">محاور التنافس</option>
                        <option value="#recommendations">توصيات استراتيجية</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">

        <section id="overview" class="py-12 min-h-screen">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-stone-900">نظرة عامة على السوق</h2>
                <p class="mt-4 text-lg text-stone-600 max-w-3xl mx-auto">يقدم هذا القسم ملخصاً شاملاً لأبرز اللاعبين في سوق التدريب، مصنفين حسب طبيعة عملهم. استكشف المنافسين الرئيسيين وتعرف على ميزاتهم الأساسية لفهم بنية السوق الحالية.</p>
            </div>

            <div class="flex justify-center mb-8">
                <div id="filter-buttons" class="flex space-x-2 space-x-reverse p-1 bg-stone-200 rounded-full">
                    <button class="filter-btn active w-full sm:w-auto" data-filter="all">الكل</button>
                    <button class="filter-btn" data-filter="مؤسسي">مؤسسي وأكاديمي</button>
                    <button class="filter-btn" data-filter="شركات">تدريب شركات</button>
                    <button class="filter-btn" data-filter="أونلاين">سوق شامل عبر الإنترنت</button>
                </div>
            </div>

            <div id="competitor-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            </div>
        </section>

        <section id="comparison" class="py-12 min-h-screen bg-white rounded-2xl shadow-lg">
             <div class="text-center mb-12 px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-stone-900">مقارنة تفصيلية للمنافسين</h2>
                <p class="mt-4 text-lg text-stone-600 max-w-3xl mx-auto">اختر منافساً لعرض تحليل معمق لنقاط القوة والضعف والفرص والتهديدات (SWOT). يمكنك أيضاً مقارنة محفظة برامجهم التدريبية بشكل مرئي مع متوسط السوق لفهم تموضعهم التنافسي.</p>
            </div>
            
            <div class="flex justify-center mb-8 px-4">
                 <select id="competitor-selector" class="w-full max-w-md bg-stone-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block p-2.5">
                 </select>
            </div>

            <div id="competitor-details" class="mt-8 transition-opacity duration-500 ease-in-out opacity-0">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 px-4">
                    <div id="swot-analysis" class="space-y-4">
                    </div>
                    <div>
                        <div class="chart-container">
                            <canvas id="portfolioChart"></canvas>
                        </div>
                        <p id="chart-description" class="text-center text-sm text-stone-500 mt-2"></p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="analysis" class="py-12 min-h-screen">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-stone-900">تحليل محاور التنافس الرئيسية</h2>
                <p class="mt-4 text-lg text-stone-600 max-w-3xl mx-auto">يكشف هذا القسم عن ساحات المعركة الأساسية في السوق. استكشف كيف يشكل الاعتماد والجودة الحضور الرقمي المشهد التنافسي، ومن يتفوق في كل مجال.</p>
            </div>

            <div class="max-w-4xl mx-auto">
                 <div class="mb-4 border-b border-gray-200">
                    <ul class="flex flex-wrap -mb-px text-sm font-medium text-center" id="analysis-tabs" role="tablist">
                        <li class="mr-2" role="presentation">
                            <button class="analysis-tab inline-block p-4 border-b-2 rounded-t-lg" id="accreditation-tab-btn" type="button" role="tab" aria-controls="accreditation-tab" aria-selected="true">مشهد الاعتماد والمصداقية</button>
                        </li>
                        <li class="mr-2" role="presentation">
                            <button class="analysis-tab inline-block p-4 border-b-2 rounded-t-lg" id="digital-tab-btn" type="button" role="tab" aria-controls="digital-tab" aria-selected="false">مقارنة الحضور الرقمي</button>
                        </li>
                    </ul>
                </div>
                <div id="analysis-tab-content">
                    <div class="p-4 rounded-lg bg-white shadow" id="accreditation-tab" role="tabpanel" aria-labelledby="accreditation-tab-btn">
                         <h3 class="text-xl font-bold mb-4 text-teal-800">مستويات الاعتماد في السوق</h3>
                         <p class="text-stone-600 mb-6">يعتبر الاعتماد أداة أساسية للتمييز. السوق مقسم إلى مستويات واضحة من حيث القيمة والمصداقية، مما يؤثر بشكل مباشر على السوق المستهدف لكل جهة.</p>
                         <div class="space-y-4">
                            <div class="p-4 border-l-4 border-amber-400 bg-amber-50 rounded">
                                <h4 class="font-bold text-amber-800">المستوى الأول (قيمة عالية)</h4>
                                <p class="text-sm text-amber-700">هيئات دولية مرموقة مثل IACET/ACCET وهيئات مهنية محترمة مثل PMI, HRCI. أساسية للعملاء من الشركات والعملاء الدوليين.</p>
                                <p class="text-xs font-semibold mt-2">لاعبون رئيسيون: <span class="font-normal">AUC, Glomacs, AMIDEAST</span></p>
                            </div>
                             <div class="p-4 border-l-4 border-sky-400 bg-sky-50 rounded">
                                <h4 class="font-bold text-sky-800">المستوى الثاني (قيمة جيدة)</h4>
                                <p class="text-sm text-sky-700">معايير موجهة للجودة والعمليات مثل شهادات ISO. تشير إلى إدارة جودة موثوقة.</p>
                                <p class="text-xs font-semibold mt-2">لاعبون رئيسيون: <span class="font-normal">IBS Academy, أكاديمية التعلم</span></p>
                            </div>
                             <div class="p-4 border-l-4 border-emerald-400 bg-emerald-50 rounded">
                                <h4 class="font-bold text-emerald-800">المستوى الثالث (قيمة محلية)</h4>
                                <p class="text-sm text-emerald-700">اعتمادات حكومية مثل TVTC السعودية. ضرورية للعمل في السوق المحلي ولكن تأثيرها الدولي محدود.</p>
                                <p class="text-xs font-semibold mt-2">لاعبون رئيسيون: <span class="font-normal">أكاديمية التعلم</span></p>
                            </div>
                              <div class="p-4 border-l-4 border-rose-400 bg-rose-50 rounded">
                                <h4 class="font-bold text-rose-800">المستوى الرابع (قيمة منخفضة/غامضة)</h4>
                                <p class="text-sm text-rose-700">ادعاءات غير محددة أو اعتمادات غير معروفة. تمثل فجوة مصداقية كبيرة.</p>
                                <p class="text-xs font-semibold mt-2">لاعبون رئيسيون: <span class="font-normal">IGTS, The Knowledge Academy</span></p>
                            </div>
                         </div>
                    </div>
                    <div class="hidden p-4 rounded-lg bg-white" id="digital-tab" role="tabpanel" aria-labelledby="digital-tab-btn">
                        <div class="chart-container h-[500px] md:h-[600px] max-h-[700px]">
                             <canvas id="digitalPresenceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <section id="recommendations" class="py-12 min-h-screen bg-teal-800 text-white rounded-2xl shadow-lg">
             <div class="text-center mb-12 px-4">
                <h2 class="text-3xl md:text-4xl font-bold">التوصيات الاستراتيجية والنظرة المستقبلية</h2>
                <p class="mt-4 text-lg text-teal-200 max-w-3xl mx-auto">يترجم هذا القسم التحليل إلى نصائح قابلة للتنفيذ. استكشف الفرص المتاحة في السوق، وكيفية التموضع بشكل تنافسي، وأفضل الاستراتيجيات للتسويق الرقمي وبناء الشراكات.</p>
            </div>
            <div id="recommendations-accordion" class="max-w-3xl mx-auto space-y-4 px-4">
            </div>
        </section>
    </main>
<script>
document.addEventListener('DOMContentLoaded', () => {

    const competitorData = {
        'ibs': {
            name: 'IBS Academy (مصر)',
            type: 'أونلاين',
            feature: 'منصة تعلم متقدمة واعتماد ISO',
            logo: 'IBS',
            swot: {
                strengths: ['محفظة برامج متنوعة ومنظمة', 'اعتمادات قوية (ISO ومحلية)', 'منصة تعلم إلكتروني متقدمة', 'تسويق بالمحتوى عبر "بوابة المعرفة"'],
                weaknesses: ['احتمالية الخلط في العلامة التجارية بسبب شيوع اسم "IBS"', 'شفافية الأسعار ليست فورية'],
                opportunities: ['التوسع في أسواق إقليمية جديدة بناءً على قائمة العملاء الحالية', 'تقديم شهادات معتمدة دوليًا بشكل أكبر'],
                threats: ['المنافسة من مراكز تدريب تحمل نفس الاسم', 'تغير متطلبات السوق بسرعة']
            },
            portfolio: { 'تكنولوجيا المعلومات': 5, 'الإدارة والقيادة': 5, 'المالية والمحاسبة': 5, 'الصحة والسلامة': 4, 'المهارات الشخصية': 4, 'اللغة': 3, 'المهن الحرفية': 1 }
        },
        'aol': {
            name: 'أكاديمية التعلم (السعودية)',
            type: 'مؤسسي',
            feature: 'توافق استراتيجي مع رؤية 2030',
            logo: 'التعلم',
            swot: {
                strengths: ['شرعية محلية قوية (مدرجة في البورصة ومعتمدة من TVTC)', 'توافق استراتيجي مع رؤية 2030', 'شراكات رفيعة المستوى (مثل نادي الهلال)', 'بنية تحتية قوية (10+ فروع وبوابة إلكترونية)'],
                weaknesses: ['تركيز أقل على الاعتمادات الدولية', 'تركيز جغرافي كبير على السوق السعودي'],
                opportunities: ['الاستفادة من برامج التوطين في السعودية', 'التوسع في دول الخليج الأخرى'],
                threats: ['دخول منافسين دوليين للسوق السعودي', 'الاعتماد الكبير على العقود الحكومية']
            },
            portfolio: { 'تكنولوجيا المعلومات': 4, 'الإدارة والقيادة': 4, 'المالية والمحاسبة': 4, 'الصحة والسلامة': 4, 'المهارات الشخصية': 3, 'اللغة': 1, 'المهن الحرفية': 1 }
        },
        'igts': {
            name: 'IGTS',
            type: 'أونلاين',
            feature: 'كتالوج ضخم (+600 دورة) وأسعار تنافسية',
            logo: 'IGTS',
            swot: {
                strengths: ['كتالوج دورات هائل ومتنوع', 'أسعار تنافسية وخصومات كبيرة', 'تنوع مستويات البرامج (دبلومات وماجستير)'],
                weaknesses: ['اعتمادات غامضة وغير معروفة (فجوة مصداقية)', 'بصمة رقمية مهنية محدودة (غياب عن LinkedIn)', 'جودة محتملة غير متجانسة بسبب اتساع الكتالوج'],
                opportunities: ['الحصول على اعتمادات معروفة لزيادة المصداقية', 'تحسين التواجد على المنصات المهنية'],
                threats: ['تشكيك العملاء في جودة الشهادات', 'منافسة من منصات تقدم محتوى مجاني أو أرخص']
            },
            portfolio: { 'تكنولوجيا المعلومات': 4, 'الإدارة والقيادة': 4, 'المالية والمحاسبة': 4, 'الصحة والسلامة': 4, 'المهارات الشخصية': 3, 'اللغة': 3, 'المهن الحرفية': 1 }
        },
        'auc': {
            name: 'AUC - كلية التعليم المستمر',
            type: 'مؤسسي',
            feature: 'علامة تجارية مرموقة واعتماد IACET الدولي',
            logo: 'AUC',
            swot: {
                strengths: ['علامة تجارية ذهبية في السوق المصري', 'اعتماد IACET الدولي المرموق', 'شراكات مع كيانات كبرى', 'برامج عالية الجودة ومتنوعة'],
                weaknesses: ['أسعار مرتفعة مقارنة بالمنافسين', 'مرونة أقل في البرامج والجداول الزمنية'],
                opportunities: ['إطلاق برامج تنفيذية للشركات الكبرى', 'التوسع في التدريب عبر الإنترنت إقليميًا'],
                threats: ['المنافسون الذين يقدمون بدائل أرخص وأكثر مرونة', 'الأزمات الاقتصادية التي تؤثر على الإنفاق على التدريب']
            },
            portfolio: { 'تكنولوجيا المعلومات': 3, 'الإدارة والقيادة': 4, 'المالية والمحاسبة': 4, 'الصحة والسلامة': 3, 'المهارات الشخصية': 5, 'اللغة': 5, 'المهن الحرفية': 1 }
        },
        'amideast': {
            name: 'AMIDEAST مصر',
            type: 'مؤسسي',
            feature: 'التركيز على اللغة الإنجليزية والتوظيف',
            logo: 'AMIDEAST',
            swot: {
                strengths: ['تركيز متخصص على اللغة الإنجليزية والتوظيف', 'بوابة لشهادات Prometric الدولية', 'علامة تجارية مرتبطة بالتعليم على النمط الأمريكي'],
                weaknesses: ['نطاق محدود للدورات مقارنة بالمنافسين الشاملين', 'قد يُنظر إليه على أنه متخصص بشكل مفرط'],
                opportunities: ['التوسع في برامج المهارات التقنية المطلوبة', 'شراكات مع شركات التوظيف'],
                threats: ['انتشار تطبيقات تعلم اللغة المجانية', 'منافسة من مراكز اختبار أخرى']
            },
            portfolio: { 'تكنولوجيا المعلومات': 1, 'الإدارة والقيادة': 3, 'المالية والمحاسبة': 1, 'الصحة والسلامة': 1, 'المهارات الشخصية': 4, 'اللغة': 5, 'المهن الحرفية': 1 }
        },
        'glomacs': {
            name: 'Glomacs',
            type: 'شركات',
            feature: 'اعتمادات دولية متعددة واستهداف الشركات',
            logo: 'Glomacs',
            swot: {
                strengths: ['اعتمادات دولية متعددة وقوية (PMI, HRCI, ILM)', 'سمعة ممتازة في تدريب الشركات', 'محفظة عملاء قوية'],
                weaknesses: ['أسعار باهظة جداً', 'أقل شهرة لدى الأفراد (B2C)'],
                opportunities: ['تقديم برامج بأسعار معقولة للشريحة المتوسطة من الشركات', 'ورش عمل متخصصة عبر الإنترنت'],
                threats: ['المنافسون الذين يقدمون نفس الاعتمادات بأسعار أقل', 'الشركات التي تطور برامج تدريب داخلية']
            },
            portfolio: { 'تكنولوجيا المعلومات': 1, 'الإدارة والقيادة': 5, 'المالية والمحاسبة': 4, 'الصحة والسلامة': 4, 'المهارات الشخصية': 4, 'اللغة': 1, 'المهن الحرفية': 1 }
        },
        'dale': {
            name: 'Dale Carnegie مصر',
            type: 'شركات',
            feature: 'علامة تجارية عالمية في المهارات الشخصية',
            logo: 'Dale',
            swot: {
                strengths: ['علامة تجارية عالمية عريقة لا تضاهى في مجالها', 'منهجيات مثبتة ومعروفة عالمياً', 'تركيز متخصص وعميق في المهارات الشخصية والقيادة'],
                weaknesses: ['نطاق ضيق جداً (لا يوجد تدريب تقني)', 'قد يُنظر إليه على أنه قديم الطراز'],
                opportunities: ['دمج منهجياتهم مع التدريب التقني عبر شراكات', 'برامج مكثفة عبر الإنترنت للقادة الجدد'],
                threats: ['ظهور مدربين وخبراء جدد في المهارات الشخصية بأساليب حديثة', 'المحتوى المجاني الوفير حول المهارات الشخصية عبر الإنترنت']
            },
            portfolio: { 'تكنولوجيا المعلومات': 0, 'الإدارة والقيادة': 5, 'المالية والمحاسبة': 1, 'الصحة والسلامة': 0, 'المهارات الشخصية': 5, 'اللغة': 1, 'المهن الحرفية': 0 }
        },
        'tka': {
            name: 'The Knowledge Academy',
            type: 'أونلاين',
            feature: 'تسويق رقمي قوي وكتالوج ضخم',
            logo: 'TKA',
            swot: {
                strengths: ['بصمة رقمية هائلة وتسويق قوي', 'كتالوج دورات ضخم جداً'],
                weaknesses: ['سمعة سلبية للغاية في المراجعات المستقلة (اتهامات بالاحتيال)', 'فجوة كبيرة بين التسويق وجودة المنتج الفعلية', 'دعم عملاء سيء حسب المراجعات'],
                opportunities: ['تحسين جودة المنتج والخدمة لاستعادة السمعة', 'التركيز على بناء مجتمع حقيقي للمتعلمين'],
                threats: ['فقدان ثقة السوق بالكامل', 'الإجراءات القانونية من العملاء غير الراضين']
            },
            portfolio: { 'تكنولوجيا المعلومات': 4, 'الإدارة والقيادة': 4, 'المالية والمحاسبة': 3, 'الصحة والسلامة': 3, 'المهارات الشخصية': 3, 'اللغة': 2, 'المهن الحرفية': 1 }
        },
    };

    const recommendationsData = [
        { title: 'استهداف قطاع "التدريب المهني الاحترافي"', content: 'التركيز على تطوير برامج عالية الجودة ومعتمدة دوليًا في المجالات التقنية التي يرتفع عليها الطلب ولكنها لا تحظى بخدمة كافية من المنافسين في القطاع الخاص (مثل تكنولوجيا التصنيع المتقدم، تكنولوجيا الطاقة المتجددة).' },
        { title: 'إنشاء برامج "المهارات المدمجة"', content: 'تطوير مناهج فريدة تدمج المهارات التقنية عالية الطلب (مثل تحليل البيانات) مع المهارات الشخصية الأساسية (مثل التواصل والقيادة) في شهادة واحدة متماسكة، مما يوفر عرض قيمة فريد.' },
        { title: 'التموضع ضد "المجمعين" (Aggregators)', content: 'مواجهة عرض القيمة لمقدمي الخدمات للسوق الشامل مثل IGTS و The Knowledge Academy بشكل مباشر من خلال التسويق المكثف للشفافية، والاعتمادات القابلة للتحقق، والتدريس بقيادة خبراء حقيقيين.' },
        { title: 'بناء قوة على LinkedIn موجهة للشركات (B2B)', content: 'تطوير استراتيجية محتوى قوية لمنصة LinkedIn، بما في ذلك دراسات حالة لعملاء من الشركات، ومقالات من المدربين، وإعلانات عن البرامج لاستهداف مديري الموارد البشرية والتدريب.' },
        { title: 'الاستثمار في شهادات فيديو عالية الجودة', content: 'تجاوز المراجعات النصية وإنتاج شهادات فيديو احترافية من خريجين ناجحين، خاصة من عملاء الشركات. وهذا يوفر دليلاً اجتماعياً قوياً وحقيقياً يصعب تقليده.' },
        { title: 'السعي إلى شراكات مع الجامعات والشركات', content: 'إقامة شراكات مع الجامعات المحلية لتقديم شهادات مشتركة، وتحالفات مع الشركات الكبرى للمشاركة في تطوير المناهج وإنشاء مسار "من التدريب إلى التوظيف".' }
    ];

    const grid = document.getElementById('competitor-grid');
    const selector = document.getElementById('competitor-selector');
    const filterButtons = document.querySelectorAll('.filter-btn');
    const competitorDetailsSection = document.getElementById('competitor-details');
    
    function populateGrid(filter = 'all') {
        grid.innerHTML = '';
        Object.entries(competitorData).forEach(([key, comp]) => {
            if (filter === 'all' || comp.type === filter) {
                const card = document.createElement('div');
                card.className = 'competitor-card bg-white p-6 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer';
                card.dataset.key = key;
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-stone-800">${comp.name}</h3>
                        <div class="w-12 h-12 bg-teal-500 flex items-center justify-center rounded-full text-white font-bold text-sm">${comp.logo}</div>
                    </div>
                    <p class="text-stone-600">${comp.feature}</p>
                    <span class="inline-block mt-4 bg-amber-200 text-amber-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full">${comp.type}</span>
                `;
                grid.appendChild(card);
            }
        });
    }
    
    function populateSelector() {
        selector.innerHTML = '<option selected disabled>-- اختر منافساً للعرض --</option>';
        Object.entries(competitorData).forEach(([key, comp]) => {
            const option = document.createElement('option');
            option.value = key;
            option.textContent = comp.name;
            selector.appendChild(option);
        });
    }

    function displayCompetitorDetails(key) {
        if (!key || !competitorData[key]) {
            competitorDetailsSection.classList.add('opacity-0');
            return;
        }
        const comp = competitorData[key];
        const swotContainer = document.getElementById('swot-analysis');

        const swotHTML = `
            <div class="p-4 bg-green-50 border-r-4 border-green-500 rounded-r-lg">
                <h4 class="font-bold text-green-800">✅ نقاط القوة</h4>
                <ul class="list-disc pr-5 mt-2 text-green-700 text-sm space-y-1">${comp.swot.strengths.map(s => `<li>${s}</li>`).join('')}</ul>
            </div>
            <div class="p-4 bg-red-50 border-r-4 border-red-500 rounded-r-lg">
                <h4 class="font-bold text-red-800">❌ نقاط الضعف</h4>
                <ul class="list-disc pr-5 mt-2 text-red-700 text-sm space-y-1">${comp.swot.weaknesses.map(w => `<li>${w}</li>`).join('')}</ul>
            </div>
             <div class="p-4 bg-blue-50 border-r-4 border-blue-500 rounded-r-lg">
                <h4 class="font-bold text-blue-800">💡 الفرص</h4>
                 <ul class="list-disc pr-5 mt-2 text-blue-700 text-sm space-y-1">${comp.swot.opportunities.map(o => `<li>${o}</li>`).join('')}</ul>
            </div>
             <div class="p-4 bg-yellow-50 border-r-4 border-yellow-500 rounded-r-lg">
                <h4 class="font-bold text-yellow-800">⚠️ التهديدات</h4>
                <ul class="list-disc pr-5 mt-2 text-yellow-700 text-sm space-y-1">${comp.swot.threats.map(t => `<li>${t}</li>`).join('')}</ul>
            </div>
        `;
        swotContainer.innerHTML = swotHTML;
        
        updatePortfolioChart(comp.portfolio, comp.name);
        competitorDetailsSection.classList.remove('opacity-0');
    }

    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            filterButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            populateGrid(button.dataset.filter);
        });
    });

    grid.addEventListener('click', (e) => {
        const card = e.target.closest('.competitor-card');
        if (card) {
            const key = card.dataset.key;
            selector.value = key;
            displayCompetitorDetails(key);
            document.getElementById('comparison').scrollIntoView({ behavior: 'smooth' });
        }
    });
    
    selector.addEventListener('change', (e) => {
        displayCompetitorDetails(e.target.value);
    });

    let portfolioChartInstance;
    function updatePortfolioChart(portfolioData, competitorName) {
        const ctx = document.getElementById('portfolioChart').getContext('2d');
        const labels = Object.keys(portfolioData);
        const values = Object.values(portfolioData);

        const averagePortfolio = {
            'تكنولوجيا المعلومات': 2.9, 'الإدارة والقيادة': 3.9, 'المالية والمحاسبة': 3.1, 'الصحة والسلامة': 2.9,
            'المهارات الشخصية': 3.6, 'اللغة': 2.4, 'المهن الحرفية': 0.8
        };
        const averageValues = Object.values(averagePortfolio);

        if (portfolioChartInstance) {
            portfolioChartInstance.destroy();
        }

        document.getElementById('chart-description').textContent = `تقييم قوة البرامج التدريبية لـ ${competitorName} (من 0 إلى 5)`;

        portfolioChartInstance = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: [{
                    label: competitorName,
                    data: values,
                    fill: true,
                    backgroundColor: 'rgba(13, 148, 136, 0.2)', // teal-600
                    borderColor: 'rgb(13, 148, 136)',
                    pointBackgroundColor: 'rgb(13, 148, 136)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(13, 148, 136)'
                }, {
                    label: 'متوسط السوق',
                    data: averageValues,
                    fill: true,
                    backgroundColor: 'rgba(203, 213, 225, 0.2)', // slate-300
                    borderColor: 'rgb(100, 116, 139)',
                    pointBackgroundColor: 'rgb(100, 116, 139)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(100, 116, 139)'
                }]
            },
            options: {
                maintainAspectRatio: false,
                responsive: true,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: { font: { size: 10, family: 'Tajawal' }, color: '#334155' },
                        ticks: { beginAtZero: true, max: 5, stepSize: 1, backdropColor: 'rgba(255, 255, 255, 0.75)' }
                    }
                },
                plugins: {
                    legend: { labels: { font: { family: 'Tajawal' } } },
                    tooltip: {
                         bodyFont: { family: 'Tajawal' },
                         titleFont: { family: 'Tajawal' }
                    }
                }
            }
        });
    }

    const recommendationsAccordion = document.getElementById('recommendations-accordion');
    recommendationsData.forEach((rec, index) => {
        const item = document.createElement('div');
        item.className = 'bg-white/10 rounded-lg';
        item.innerHTML = `
            <h2>
                <button type="button" class="flex items-center justify-between w-full p-5 font-medium text-left text-teal-100" data-accordion-target="accordion-body-${index}">
                    <span>${rec.title}</span>
                    <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                    </svg>
                </button>
            </h2>
            <div id="accordion-body-${index}" class="hidden p-5 border-t border-white/20">
                <p class="mb-2 text-teal-200">${rec.content}</p>
            </div>
        `;
        recommendationsAccordion.appendChild(item);
    });

    recommendationsAccordion.addEventListener('click', (e) => {
        const button = e.target.closest('button');
        if (button) {
            const targetId = button.getAttribute('data-accordion-target');
            const targetBody = document.getElementById(targetId);
            const icon = button.querySelector('svg');
            
            if (targetBody) {
                const isHidden = targetBody.classList.contains('hidden');
                targetBody.classList.toggle('hidden');
                icon.classList.toggle('rotate-180');
            }
        }
    });

    const analysisTabs = document.querySelectorAll('.analysis-tab');
    const tabContents = document.querySelectorAll('[role="tabpanel"]');
    const digitalTabBtn = document.getElementById('digital-tab-btn');
    let digitalChartInstance;

    analysisTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            analysisTabs.forEach(t => {
                t.classList.remove('border-teal-500', 'text-teal-600');
                t.classList.add('border-transparent', 'hover:text-gray-600', 'hover:border-gray-300');
                t.setAttribute('aria-selected', 'false');
            });
            tab.classList.add('border-teal-500', 'text-teal-600');
            tab.classList.remove('border-transparent', 'hover:text-gray-600', 'hover:border-gray-300');
            tab.setAttribute('aria-selected', 'true');

            const targetId = tab.getAttribute('aria-controls');
            tabContents.forEach(content => {
                if (content.id === targetId) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
             if(targetId === 'digital-tab' && !digitalChartInstance){
                createDigitalPresenceChart();
            }
        });
    });
    
    function createDigitalPresenceChart(){
        const ctx = document.getElementById('digitalPresenceChart').getContext('2d');
        const digitalData = {
            labels: ['IBS Academy', 'أكاديمية التعلم', 'IGTS', 'AUC', 'Glomacs', 'The Knowledge Academy'],
            datasets: [{
                label: 'تجربة المستخدم للموقع',
                data: [4, 3, 2, 4, 3, 3],
                backgroundColor: 'rgba(14, 165, 233, 0.7)', // sky-500
            }, {
                label: 'حضور LinkedIn',
                data: [3, 4, 1, 4, 4, 3],
                backgroundColor: 'rgba(16, 185, 129, 0.7)', // emerald-500
            }, {
                label: 'تسويق المحتوى',
                data: [5, 1, 1, 1, 3, 1],
                 backgroundColor: 'rgba(249, 115, 22, 0.7)', // orange-500
            }]
        };
        digitalChartInstance = new Chart(ctx, {
            type: 'bar',
            data: digitalData,
            options: {
                indexAxis: 'y',
                maintainAspectRatio: false,
                responsive: true,
                 scales: {
                    x: {
                        stacked: true,
                        ticks: { font: { family: 'Tajawal' } }
                    },
                    y: {
                        stacked: true,
                        ticks: { font: { family: 'Tajawal' } }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'تقييم الحضور الرقمي (من 5)',
                        font: { size: 16, family: 'Tajawal' }
                    },
                    legend: {
                        position: 'top',
                         labels: { font: { family: 'Tajawal' } }
                    },
                    tooltip: {
                         bodyFont: { family: 'Tajawal' },
                         titleFont: { family: 'Tajawal' }
                    }
                },
            }
        });
    }

    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navLinks.forEach(link => {
                    link.classList.toggle('nav-link-active', link.getAttribute('href').substring(1) === entry.target.id);
                });
            }
        });
    }, { threshold: 0.5 });

    sections.forEach(section => observer.observe(section));

    document.getElementById('mobile-nav').addEventListener('change', function() {
        window.location.hash = this.value;
    });
    
    const initialFilterBtn = document.querySelector('.filter-btn[data-filter="all"]');
    initialFilterBtn.classList.add('active');
    
    const initialAnalysisTab = document.getElementById('accreditation-tab-btn');
    initialAnalysisTab.classList.add('border-teal-500', 'text-teal-600');
    initialAnalysisTab.classList.remove('border-transparent', 'hover:text-gray-600', 'hover:border-gray-300');
    document.getElementById('accreditation-tab').classList.remove('hidden');
    document.getElementById('digital-tab').classList.add('hidden');


    populateGrid();
    populateSelector();
});
</script>
</body>
</html>
